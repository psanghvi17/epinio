issuer: https://auth.192.168.1.8.nip.io
web:
  allowedOrigins: ['localhost:8005']
storage:
  type: kubernetes
  config:
    inCluster: true
oauth2:
  skipApprovalScreen: true
enablePasswordDB: true
staticPasswords:
- email: "admin@epinio.io"
  # bcrypt hash of the string "password": $(echo password | htpasswd -BinC 10 admin | cut -d: -f2)
  hash: "$2a$10$2b2cU8CPhOTaGrs1HRQuAueS7JTT5ZHsHSzYiFPm1leZck7Mc8T4W"
  username: "admin"
  userID: "08a8684b-db88-4b73-90a9-3cd1661f5466"
- email: "epinio@epinio.io"
  hash: "$2a$10$2b2cU8CPhOTaGrs1HRQuAueS7JTT5ZHsHSzYiFPm1leZck7Mc8T4W"
  userID: "08a8684b-db88-4b73-90a9-3cd1661f5467"

staticClients:
- id: epinio-api
  name: 'Epinio API'
  public: true
  # The 'Epinio API' lets the 'Epinio cli' issue ID tokens on its behalf.
  # https://dexidp.io/docs/custom-scopes-claims-clients/#cross-client-trust-and-authorized-party
  trustedPeers:
  - epinio-cli
  - epinio-ui
  - rancher-dashboard

- id: epinio-cli
  name: 'Epinio cli'
  public: true

- id: epinio-ui
  name: 'Epinio UI'
  secret: "uJfiOAOiK6fjEb3bj66O81I2Pdwsxihf"
  # Shouldn't be public, https://dexidp.io/docs/custom-scopes-claims-clients/#public-clients
  redirectURIs:
  - "https://epinio.192.168.1.8.nip.io/auth/verify/"
- id: rancher-dashboard
  name: 'Rancher Dashboard'
  public: true
  redirectURIs:
  - "https://rancher.192.168.49.2.nip.io/dashboard/epinio/auth/verify/"

connectors:
  # GitHub OAuth connector
  - type: github
    id: github
    name: GitHub
    config:
      clientID: Ov23liNWK2ljGs6VmXmY
      clientSecret: 232de3b3b26e2ecf4e1718ff4836e8858c82164e
      redirectURI: https://auth.192.168.1.8.nip.io/callback
      # Optional: restrict to specific GitHub orgs
      # orgs:
      #   - name: your-org-name
      # Optional: load all groups
      loadAllGroups: false
      teamNameField: slug

  # Rancher OIDC connector
  - type: oidc
    id: rancher
    name: Rancher
    config:
      issuer: https://rancher.192.168.49.2.nip.io/oidc
      clientID: client-j8h9rrt78b
      clientSecret: secret-2ghdjpdrmvszhpqgcc2f78j9twp5pxqn8gk4f4f2mc6jpwxwjl45vzh2
      redirectURI: https://auth.192.168.1.8.nip.io/callback
      insecureSkipVerify: true
      getUserInfo: true
      # Request specific scopes
      scopes:
        - openid
        - profile
        - email
      # Claim mappings
      claimMapping:
        preferred_username: preferred_username
        email: email
        groups: groups